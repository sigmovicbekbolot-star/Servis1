<!DOCTYPE html>
<html lang="ky">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service.kg | –¢–µ–π–ª”©”© –ü–æ—Ä—Ç–∞–ª—ã</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = { darkMode: 'class' }
    </script>

    <style>
        /* Google Translate –±–∞—Å–∫—ã—á—ã–Ω –∂–∞–Ω–∞ –∂–æ–≥–æ—Ä—É–¥–∞–≥—ã –±–∞–Ω–Ω–µ—Ä–¥–∏ –∂–∞—à—ã—Ä—É—É */
        .goog-te-banner-frame.skiptranslate { display: none !important; }
        body { top: 0 !important; }
        #google_translate_element { display: none; }
        .goog-te-gadget { font-size: 0 !important; }

        /* Dark mode “Ø—á“Ø–Ω –∫–æ—à—É–º—á–∞ —Å—Ç–∏–ª–¥–µ—Ä */
        .dark .bg-white-80 { background-color: rgba(15, 23, 42, 0.8); }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 transition-colors duration-300">

    <nav class="sticky top-0 z-[100] bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
        <div class="max-w-7xl mx-auto px-4 h-20 flex justify-between items-center">

            <a href="/" class="text-2xl font-black uppercase italic tracking-tighter">
                Service<span class="text-orange-500">.kg</span>
            </a>

            <div class="flex items-center gap-3">

                <div class="relative group">
                    <button class="bg-slate-100 dark:bg-slate-800 px-4 py-2.5 rounded-xl text-[10px] font-black border border-slate-200 dark:border-slate-700 uppercase flex items-center gap-2 hover:bg-white dark:hover:bg-slate-700 transition-all">
                        <i class="fa-solid fa-globe text-blue-500"></i>
                        <span id="current-lang">–¢–∏–ª –¢–∞–Ω–¥–æ–æ</span>
                        <i class="fa-solid fa-chevron-down opacity-50"></i>
                    </button>

                    <div class="absolute right-0 mt-2 w-40 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-2xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-[110] overflow-hidden">
                        <button onclick="changeLanguage('ky')" class="w-full text-left px-4 py-3 text-[10px] font-bold hover:bg-blue-50 dark:hover:bg-slate-800 border-b border-slate-50 dark:border-slate-800 uppercase flex items-center gap-3">
                            <span class="text-base">üá∞üá¨</span> –ö—ã—Ä–≥—ã–∑—á–∞
                        </button>
                        <button onclick="changeLanguage('ru')" class="w-full text-left px-4 py-3 text-[10px] font-bold hover:bg-blue-50 dark:hover:bg-slate-800 border-b border-slate-50 dark:border-slate-800 uppercase flex items-center gap-3">
                            <span class="text-base">üá∑üá∫</span> –†—É—Å—Å–∫–∏–π
                        </button>
                        <button onclick="changeLanguage('en')" class="w-full text-left px-4 py-3 text-[10px] font-bold hover:bg-blue-50 dark:hover:bg-slate-800 uppercase flex items-center gap-3">
                            <span class="text-base">üá∫üá∏</span> English
                        </button>
                    </div>
                </div>

                <div id="google_translate_element"></div>

                <button onclick="toggleTheme()" class="w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center border border-slate-200 dark:border-slate-700 hover:scale-105 transition-all">
                    <i id="theme-icon" class="fa-solid fa-moon"></i>
                </button>

                {% if user.is_authenticated %}
                <div class="flex items-center gap-2">
                    <a href="{% url 'dashboard' %}" class="w-10 h-10 rounded-xl bg-blue-600 text-white flex items-center justify-center shadow-lg shadow-blue-500/30">
                        <i class="fa-solid fa-user-gear"></i>
                    </a>
                    <form action="{% url 'logout' %}" method="post" class="inline">
                        {% csrf_token %}
                        <button type="submit" class="bg-red-50 dark:bg-red-950/30 text-red-600 px-4 py-2.5 rounded-xl text-[10px] font-black uppercase hover:bg-red-100 transition-all">
                            –ß—ã–≥—É—É
                        </button>
                    </form>
                </div>
                {% else %}
                <a href="{% url 'login' %}" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-xl text-[10px] font-black uppercase shadow-lg shadow-blue-600/20 transition-all active:scale-95">
                    –ö–∏—Ä“Ø“Ø
                </a>
                {% endif %}
            </div>
        </div>
    </nav>

    <main class="min-h-[calc(100vh-80px)]">
        {% block content %}
        {% endblock %}
    </main>

    <footer class="bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 py-10">
        <div class="max-w-7xl mx-auto px-4 text-center text-slate-400 text-[10px] font-bold uppercase tracking-[0.2em]">
            &copy; 2026 Service.kg ‚Äî –ë–∞—Ä–¥—ã–∫ —É–∫—É–∫—Ç–∞—Ä –∫–æ—Ä–≥–æ–ª–≥–æ–Ω
        </div>
    </footer>

    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'ky',
                includedLanguages: 'ky,ru,en',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');
        }

        function changeLanguage(langCode) {
            var select = document.querySelector('.goog-te-combo');
            if (select) {
                select.value = langCode;
                select.dispatchEvent(new Event('change'));

                const langNames = {'ky': '–ö—ã—Ä–≥—ã–∑—á–∞', 'ru': '–†—É—Å—Å–∫–∏–π', 'en': 'English'};
                document.getElementById('current-lang').innerText = langNames[langCode];
            } else {
                // –≠–≥–µ—Ä Google –∞–ª–∏ –∂“Ø–∫—Ç”©–ª”© —ç–ª–µ–∫ –±–æ–ª—Å–æ, –±–∏—Ä –∞–∑ –∫“Ø—Ç”© —Ç—É—Ä–∞—Ç
                setTimeout(function() { changeLanguage(langCode); }, 500);
            }
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        const html = document.documentElement;
        const icon = document.getElementById('theme-icon');

        function toggleTheme() {
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.theme = 'light';
                icon.className = 'fa-solid fa-moon';
            } else {
                html.classList.add('dark');
                localStorage.theme = 'dark';
                icon.className = 'fa-solid fa-sun';
            }
        }

        // –ë–∞—Ä–∞–∫—á–∞ –∂“Ø–∫—Ç”©–ª–≥”©–Ω–¥”© —Ç–µ–º–∞–Ω—ã —Ç–µ–∫—à–µ—Ä“Ø“Ø
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
            icon.className = 'fa-solid fa-sun';
        } else {
            html.classList.remove('dark');
            icon.className = 'fa-solid fa-moon';
        }
    </script>

</body>
</html>